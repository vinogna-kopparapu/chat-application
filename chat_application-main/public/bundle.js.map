{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://project2/./src/app.js","webpack://project2/./src/services.js","webpack://project2/./src/state.js","webpack://project2/./src/views.js","webpack://project2/webpack/bootstrap","webpack://project2/webpack/runtime/define property getters","webpack://project2/webpack/runtime/hasOwnProperty shorthand","webpack://project2/webpack/runtime/make namespace object","webpack://project2/./src/index.js"],"sourcesContent":["import { getState, updateState } from './state.js';\r\nimport { render, updateMessagesAndUsers } from './views.js';\r\nimport { checkSession, login, logout, sendMessage, fetchMessages, fetchUsers } from './services.js';\r\n\r\nlet pollInterval;\r\n\r\nexport function initializeApp() {\r\n    updateState({ isLoading: true });\r\n    \r\n    checkSession()\r\n        .then(user => {\r\n            updateState({ \r\n                username: user.username,\r\n                page: 'chat',\r\n                isLoading: false \r\n            });\r\n            setupPolling();\r\n            refreshView();\r\n        })\r\n        .catch(() => {\r\n            updateState({ \r\n                page: 'login',\r\n                isLoading: false \r\n            });\r\n            refreshView();\r\n        });\r\n}\r\n\r\nfunction refreshView() {\r\n    const html = render(getState());\r\n    document.querySelector('#app').innerHTML = html;\r\n}\r\n\r\nexport function handleLogin(event) {\r\n    event.preventDefault();\r\n    const username = event.target.username.value.trim();\r\n    \r\n    updateState({ isLoading: true });\r\n    login(username)\r\n        .then(user => {\r\n            updateState({ \r\n                username: user.username,\r\n                page: 'chat',\r\n                isLoading: false,\r\n                error: null\r\n            });\r\n            setupPolling();\r\n            refreshView();\r\n        })\r\n        .catch(error => {\r\n            updateState({ \r\n                error: error.message,\r\n                isLoading: false \r\n            });\r\n            refreshView();\r\n        });\r\n}\r\n\r\nexport function handleMessage(event) {\r\n    event.preventDefault();\r\n    const messageInput = event.target.message;\r\n    const message = messageInput.value.trim();\r\n    \r\n    sendMessage(message)\r\n        .then(() => {\r\n            messageInput.value = '';\r\n            return fetchMessages();\r\n        })\r\n        .then(messages => {\r\n            updateState({ messages, error: null });\r\n            updateMessagesAndUsers(getState());\r\n        })\r\n        .catch(error => {\r\n            updateState({ error: error.message });\r\n            updateMessagesAndUsers(getState());\r\n        });\r\n}\r\n\r\nexport function handleLogout() {\r\n    stopPolling();\r\n    logout()\r\n        .then(() => {\r\n            updateState({\r\n                page: 'login',\r\n                username: null,\r\n                messages: [],\r\n                users: [],\r\n                error: null\r\n            });\r\n            refreshView();\r\n        })\r\n        .catch(error => {\r\n            updateState({ error: error.message });\r\n            refreshView();\r\n        });\r\n}\r\n\r\nfunction setupPolling() {\r\n    stopPolling();\r\n    \r\n    Promise.all([fetchMessages(), fetchUsers()])\r\n        .then(([messages, users]) => {\r\n            updateState({ messages, users, error: null });\r\n            updateMessagesAndUsers(getState());\r\n        })\r\n        .catch(error => {\r\n            updateState({ error: error.message });\r\n            updateMessagesAndUsers(getState());\r\n        });\r\n\r\n    pollInterval = setInterval(() => {\r\n        Promise.all([fetchMessages(), fetchUsers()])\r\n            .then(([messages, users]) => {\r\n                const currentState = getState();\r\n                if (JSON.stringify(currentState.messages) !== JSON.stringify(messages) ||\r\n                    JSON.stringify(currentState.users) !== JSON.stringify(users)) {\r\n                    updateState({ messages, users, error: null });\r\n                    updateMessagesAndUsers(getState());\r\n                }\r\n            })\r\n            .catch(error => {\r\n                updateState({ error: error.message });\r\n                updateMessagesAndUsers(getState());\r\n            });\r\n    }, 5000);\r\n}\r\n\r\nfunction stopPolling() {\r\n    if (pollInterval) {\r\n        clearInterval(pollInterval);\r\n        pollInterval = null;\r\n    }\r\n}\r\n\r\nwindow.app = {\r\n    handleLogin,\r\n    handleMessage,\r\n    handleLogout\r\n};","\r\nexport function checkSession() {\r\n    return fetch('/api/v1/session')\r\n        .then(response => {\r\n            if (!response.ok) {\r\n                return Promise.reject(new Error('Not logged in'));\r\n            }\r\n            return response.json();\r\n        });\r\n}\r\n\r\nexport function login(username) {\r\n    return fetch('/api/v1/session', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ username }),\r\n    })\r\n    .then(response => {\r\n        if (!response.ok) {\r\n            return response.json().then(err => Promise.reject(new Error(err.error)));\r\n        }\r\n        return response.json();\r\n    });\r\n}\r\n\r\nexport function logout() {\r\n    return fetch('/api/v1/session', {\r\n        method: 'DELETE',\r\n    })\r\n    .then(response => {\r\n        if (!response.ok) {\r\n            return Promise.reject(new Error('Logout failed'));\r\n        }\r\n    });\r\n}\r\n\r\nexport function fetchMessages() {\r\n    return fetch('/api/v1/messages')\r\n        .then(response => {\r\n            if (!response.ok) {\r\n                return Promise.reject(new Error('Failed to fetch messages'));\r\n            }\r\n            return response.json();\r\n        });\r\n}\r\n\r\nexport function sendMessage(text) {\r\n    return fetch('/api/v1/messages', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ text }),\r\n    })\r\n    .then(response => {\r\n        if (!response.ok) {\r\n            return response.json().then(err => Promise.reject(new Error(err.error)));\r\n        }\r\n        return response.json();\r\n    });\r\n}\r\n\r\nexport function fetchUsers() {\r\n    return fetch('/api/v1/users')\r\n        .then(response => {\r\n            if (!response.ok) {\r\n                return Promise.reject(new Error('Failed to fetch users'));\r\n            }\r\n            return response.json();\r\n        });\r\n}\r\n","\r\nconst state = {\r\n    username: null,\r\n    isLoading: false,\r\n    error: null,\r\n    messages: [],\r\n    users: [],\r\n    page: 'loading', \r\n};\r\n\r\nexport function initializeState() {\r\n    state.username = null;\r\n    state.isLoading = false;\r\n    state.error = null;\r\n    state.messages = [];\r\n    state.users = [];\r\n    state.page = 'loading';\r\n}\r\n\r\nexport function getState() {\r\n    return state;\r\n}\r\n\r\nexport function updateState(updates) {\r\n    Object.assign(state, updates);\r\n}\r\n\r\nexport function setError(error) {\r\n    state.error = error;\r\n    state.isLoading = false;\r\n}\r\n\r\nexport function clearError() {\r\n    state.error = null;\r\n}\r\n","\r\n\r\nexport function render(state) {\r\n    if (state.isLoading) {\r\n        return `<div class=\"loading\">Loading...</div>`;\r\n    }\r\n\r\n    if (state.page === 'login') {\r\n        return `\r\n            <div class=\"login-container\">\r\n                ${state.error ? `<div class=\"error\">${state.error}</div>` : ''}\r\n                <form class=\"login-form\" onsubmit=\"app.handleLogin(event)\">\r\n                    <input type=\"text\" name=\"username\" placeholder=\"Username\">\r\n                    <button type=\"submit\" class=\"btn-primary\">Login</button>\r\n                </form>\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    if (state.page === 'chat') {\r\n        return `\r\n            <div class=\"chat-container\">\r\n                <div class=\"header\">\r\n                    <h2>Welcome, ${state.username}</h2>\r\n                    <button onclick=\"app.handleLogout()\" class=\"btn-logout\">Logout</button>\r\n                </div>\r\n                ${state.error ? `<div class=\"error\">${state.error}</div>` : ''}\r\n                <div class=\"chat-content\">\r\n                    <div class=\"users-list\">\r\n                        <h3>Online Users</h3>\r\n                        <ul>\r\n                            ${state.users.map(user => `<li>${user}</li>`).join('')}\r\n                        </ul>\r\n                    </div>\r\n                    <div class=\"chat-main\">\r\n                        <div id=\"messages-container\" class=\"messages-list\">\r\n                            ${state.messages.map(msg => `\r\n                                <div class=\"message\">\r\n                                    <span class=\"username\">${msg.username}</span>\r\n                                    <span class=\"text\">${msg.text}</span>\r\n                                    <span class=\"timestamp\">${new Date(msg.timestamp).toLocaleTimeString()}</span>\r\n                                </div>\r\n                            `).join('')}\r\n                        </div>\r\n                        <form id=\"message-form\" class=\"message-form\" onsubmit=\"app.handleMessage(event)\">\r\n                            <input type=\"text\" name=\"message\" placeholder=\"Type your message...\">\r\n                            <button type=\"submit\" class=\"btn-primary\">Send</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n    }\r\n}\r\n\r\nexport function updateMessagesAndUsers(state) {\r\n    const messagesContainer = document.getElementById('messages-container');\r\n    if (messagesContainer) {\r\n        messagesContainer.innerHTML = state.messages.map(msg => `\r\n            <div class=\"message\">\r\n                <span class=\"username\">${msg.username}</span>\r\n                <span class=\"text\">${msg.text}</span>\r\n                \r\n            </div>\r\n        `).join('');\r\n\r\n        const usersList = document.querySelector('.users-list ul');\r\n        if (usersList) {\r\n            usersList.innerHTML = state.users.map(user => `<li>${user}</li>`).join('');\r\n        }\r\n\r\n        \r\n        const existingError = document.querySelector('.error');\r\n        if (state.error) {\r\n            if (existingError) {\r\n                existingError.textContent = state.error;\r\n            } else {\r\n                const errorDiv = document.createElement('div');\r\n                errorDiv.className = 'error';\r\n                errorDiv.textContent = state.error;\r\n                const header = document.querySelector('.header');\r\n                header.insertAdjacentElement('afterend', errorDiv);\r\n            }\r\n        } else if (existingError) {\r\n            existingError.remove();\r\n        }\r\n\r\n        \r\n        messagesContainer.scrollTop = messagesContainer.scrollHeight;\r\n    }\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\r\nimport { initializeApp } from './app.js';\r\nimport { getState, updateState, initializeState } from './state.js';\r\nimport { checkSession, login, logout, sendMessage, fetchMessages, fetchUsers } from './services.js';\r\nimport { render } from './views.js';\r\n\r\n\r\ninitializeState();\r\ninitializeApp();\r\n\r\n\r\nexport {\r\n    getState,\r\n    updateState,\r\n    render,\r\n    checkSession,\r\n    login,\r\n    logout,\r\n    sendMessage,\r\n    fetchMessages,\r\n    fetchUsers\r\n};"],"names":["getState","updateState","render","updateMessagesAndUsers","checkSession","login","logout","sendMessage","fetchMessages","fetchUsers","pollInterval","initializeApp","isLoading","then","user","username","page","setupPolling","refreshView","html","document","querySelector","innerHTML","handleLogin","event","preventDefault","target","value","trim","error","message","handleMessage","messageInput","messages","handleLogout","stopPolling","users","Promise","all","_ref","_ref2","_slicedToArray","setInterval","_ref3","_ref4","currentState","JSON","stringify","clearInterval","window","app","fetch","response","ok","reject","Error","json","method","headers","body","err","text","state","initializeState","updates","Object","assign","setError","clearError","concat","map","join","msg","Date","timestamp","toLocaleTimeString","messagesContainer","getElementById","usersList","existingError","textContent","errorDiv","createElement","className","header","insertAdjacentElement","remove","scrollTop","scrollHeight"],"sourceRoot":""}